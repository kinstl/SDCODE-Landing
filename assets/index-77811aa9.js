(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function o(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(t){if(t.ep)return;t.ep=!0;const s=o(t);fetch(t.href,s)}})();const l="gallery__slide_active",g="popup_open",h="body_fixed",d="calc__button_active",m="header__mobile_open",N="header__button_open",_={квартира:1e3,дом:3e3,улица:2e3,ванная:500,гостиная:500,детская:200,кабинет:200,кухня:500,офис:1e3,прихожая:100,спальня:300,столовая:200},C={"3D визуализация*":3e4,"чертежи (рабочая документация)*":2e4,"планировочное решение*":15e3,"товары со скидкой*":1e4},S={"count-plan":7500,"count-blueprint":1e4,"count-design":2e4};class y{constructor(){this.slidesNode=Array.from(document.querySelectorAll(".gallery__slide")),this.prevButtonNode=document.querySelector(".gallery__control-prev"),this.nextButtonNode=document.querySelector(".gallery__control-next"),this.activeId=0,this.init()}init(){this.prevButtonNode.addEventListener("click",()=>{this.setActiveSlideById(this.getPrevId())}),this.nextButtonNode.addEventListener("click",()=>{this.setActiveSlideById(this.getNextId())})}setActiveSlideById(e){const o=this.activeId;this.activeId=e,this.slidesNode[o].classList.remove(l),this.slidesNode[this.activeId].classList.add(l)}getPrevId(){return this.activeId===0?this.slidesNode.length-1:this.activeId-1}getNextId(){return this.activeId===this.slidesNode.length-1?0:this.activeId+1}}class v{constructor(){this.rangeNode=document.querySelector(".js-range"),this.rangeOutputNode=document.querySelector(".js-range-output"),this.reduceButtonNodes=document.querySelectorAll(".js-count-reduce"),this.addButtonNodes=document.querySelectorAll(".js-count-add"),this.compCountNodes=document.querySelectorAll(".js-count-result"),this.customButtonNodes=document.querySelectorAll(".calc__button"),this.costNode=document.querySelector(".js-cost"),this.costMeterNode=document.querySelector("#js-cost-meter"),this.calcSelectNode=document.querySelector(".calc__select"),this.rangeNode.addEventListener("input",this.handleRangeInput.bind(this)),this.customButtonNodes.forEach(e=>{e.addEventListener("click",this.handleCustomButtonClick.bind(this))}),this.calcSelectNode.addEventListener("change",this.handleSelectChange.bind(this)),this.addButtonNodes.forEach(e=>{e.addEventListener("click",o=>this.handleCompClick(o,!0))}),this.reduceButtonNodes.forEach(e=>{e.addEventListener("click",o=>this.handleCompClick(o,!1))}),this.setCostPerMeter(this.calcSelectNode.value),this.calculateCost()}handleRangeInput(){const e=parseInt(this.rangeNode.value);this.rangeOutputNode.innerText=e,this.calculateCost()}handleCustomButtonClick(e){e.currentTarget.classList.toggle(d),this.calculateCost()}handleSelectChange(){const e=this.calcSelectNode.value;this.setCostPerMeter(e),this.calculateCost()}handleCompClick(e,o){const t=e.currentTarget.closest(".calc__count").querySelector(".js-count-result");let s=parseInt(t.innerText);o?s=Math.min(s+1,5):s=Math.max(s-1,1),t.innerText=s,this.calculateCost()}calculateCost(){const e=parseInt(this.rangeNode.value),o=parseInt(this.costMeterNode.innerText),c=this.getCustomValue(),t=this.getCompValue(),s=e*o+c+t;this.costNode.innerText=s.toLocaleString()}setCostPerMeter(e){this.costMeterNode.innerHTML=_[e]||0}getCustomValue(){let e=0;return this.customButtonNodes.forEach(o=>{const c=o.innerText;o.classList.contains(d)&&(e+=C[c]||0)}),e}getCompValue(){let e=0;return this.compCountNodes.forEach(o=>{const c=parseInt(o.innerText),t=o.getAttribute("id");c>1&&(e+=S[t]*c)}),e}}class b{constructor(){this.popupNode=document.querySelector(".js-popup"),this.popupContentNode=document.querySelector(".js-popup__content"),this.btnOpenNode=document.querySelectorAll(".js-popup__open-btn"),this.btnCloseNode=document.querySelector(".js-popup__close-btn"),this.bodyNode=document.querySelector("body"),this.btnOpenNode.forEach(e=>{e.addEventListener("click",this.togglePopup.bind(this))}),this.btnCloseNode.addEventListener("click",this.togglePopup.bind(this)),this.popupNode.addEventListener("click",e=>{!e.composedPath().includes(this.popupContentNode)&&this.togglePopup()})}togglePopup(){this.popupNode.classList.toggle(g),this.bodyNode.classList.toggle(h)}}class f{constructor(){this.bodyNode=document.querySelector("body"),this.burgerNode=document.querySelector(".js-burger"),this.burgerBtnNode=document.querySelector(".js-burger-btn"),this.burgerContentNode=document.querySelector(".js-burger__content"),this.burgerBtnNode.addEventListener("click",this.toggleBurger.bind(this)),this.burgerNode.addEventListener("click",e=>{!e.composedPath().includes(this.burgerContentNode)&&this.toggleBurger()})}toggleBurger(){this.burgerNode.classList.toggle(m),this.bodyNode.classList.toggle(h),this.burgerBtnNode.classList.toggle(N)}}new y;new b;new v;new f;const u=document.querySelector(".calc__right-col"),E=document.querySelector(".calc__left-col"),r=document.querySelector(".calc__top"),a=document.querySelector(".calc__container");window.addEventListener("resize",p);window.addEventListener("load",p);function p(){window.innerWidth<=850?(r.append(u),a.classList.add("mobile"),r.classList.add("mobile")):(E.after(u),a.classList.remove("mobile"),r.classList.remove("mobile"))}
